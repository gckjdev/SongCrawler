

1.歌曲信息抓取站点

 1.1 百度音乐内容全面 , 可以作歌曲信息收集. 
 1.2 虾米的歌曲信息排列较规整有度, 作歌词及其它信息抽取的首选; 
 1.3 宜搜的歌词则是作为文本文件提供下载, 不过抽试的歌曲有不少缺乏歌词, 作为备选.

2. 歌曲爬虫计划
   2.1 定期(每日)抓取方式. 
       主要工作方式是以按歌曲分类抓取信息.  
       开始, 对歌曲库做一个比较全的抓取(按字母序, 每个在榜歌手所有歌曲)
       之后, 可以动态设置策略(如每天对最新, 最热榜或其他)进行更新.

   2.2 按需抓取方式.
       主要针对特定的需要, 对特定分类/特定歌手进行抓取

3. 开发计划

   3.1 先完成对歌曲分类信息的收集.
       拟对百度音乐, 按字母序对每个歌手的歌曲保存(见4)
   3.2 根据上面的歌曲信息, 从虾米抓取歌词. 以文本方式保存.
   3.3 拟对流派, 分类, 对已搜集歌曲进行分类.
       这次从分类入手, 建立分类目录, 其下内容则链接到对应的歌曲存储目录

4. 信息存储格式
             
 4.1  主要数据模型M

   4.1.1 目录组织

      字母序顶级目录          A       B      C        ....         X      Y     Z
             |               |
             |             /   \
        歌手子目录       AX ... Axx  
             |           |
             |           |
          歌手歌曲    歌曲索引及相关信息(见4.1.2) + 每歌曲文件(per-song-info, 格式见5)  
 
     
   4.1.2 Mongodb组织
     
     * 前两个表主要是方便从歌手查找歌曲
     |\
     |  表名: singer 
     |  作用: 这个表按歌手名字存放信息, 可以由此表快速定位其所有歌曲(dir表项)
     |        也可获得该歌手的所有歌名清单(通过index_id字段)
     |  表项: name_capital : 名字首字母
     |        singer: 歌手名字
     |        dir: 该歌手歌曲存放目录
     |        index_id: 保存歌手歌曲索引表的id
     |
     |\
        表名: song_index
        作用: 这个表汇集歌手的所有歌曲清单. 同时, 它可以反查歌手信息(singer_id字段)
        表项: singer: 歌手名字
              singer_id: 对应的singer表的id
              songs:  歌曲名数组,　数组项:
　　　　　　　　       { 歌曲名:　song表中的id }  

     * 这个表主要是方便从歌名直接查找歌曲 
      \     
        表名: song
        作用: 歌曲元信息表
        表项: name: 歌曲名
              singer: 歌手名
              singer_info: 用于存放singer表或song_index表的id(待定, 用于实现推荐该歌手其它歌曲等功能)
              album: 专辑(可选)
              link: 歌曲链接(可选)
              site: 抓取信息的url
              lrc: 歌词存放路径
              hit: 歌曲热度(可选, 用于以后推荐等功能)
              category: 一个分类掩码,便于快速地查找符合多种分类的歌曲
      

 4.2 辅助数据模型S

   4.2.1 目录组织

    　分类顶级目录            流派             年代　　　　　主题　　　　 风格        ....  (参考百度音乐分类)
           |              　　 |
           |               　/ | \　
      分类次级目录          各种流派           ...           ...           ...
           |　　　　　　　　　　|
           |　　　　　　　　　　|
        目录项　　　　　　　目录下歌曲


   4.2.2 Mongodb组织

      * 这个表用于存放各歌曲类型分类
       \ 
        表名: song_category
        作用: 记录分类下的歌曲信息
        表项: major_name: 大分类名字
　　　　　　　minor_name: 子分类名字(可选)
              songs: 歌曲数组,　数组项:
　　　　　　　　  { 歌曲名:　song表中的id }

　　　* 这个表用于存放榜单分类(最新,　最热,　歌手榜...)
　　 　\ 
　　　　表名: song_hotboard
　　　　作用: 存放各类型榜单歌曲前100名信息,用于定期(如每天)的爬虫更新
　　　　表项: name : 榜单名字字符串
　　　　　　　type : 榜单类型  
　　　　　　　hits : 热榜数组,数组项
　　　　　　　　　  { 歌曲名:　song表中的id }　(对最新/最热类型而言)
　　　　　　　　　  { 歌手名:　singer表中的id }　(对歌手榜而言)



5. 每歌曲文本格式

    *　per-song-info文件
　　|\　
    |　文本头以YAML格式保存如下元信息(初定):
    |    歌曲名
    |    歌手
    |    专辑(可选)
    |    歌曲链接(可选)
    |    抓取站点
    |  　文件抓取时间
    |
　　|\
　　　文本内容以如下格式保存
         歌词
       
 
   
